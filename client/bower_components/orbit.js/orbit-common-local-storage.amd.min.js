define("orbit-common/local-storage-source",["orbit/lib/assert","./memory-source","exports"],function(a,b,c){"use strict";var d=a.assert,e=b["default"],f=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}},g=e.extend({init:function(a,b){d("Your browser does not support local storage!",f()),this._super.apply(this,arguments),b=b||{},this.namespace=b.namespace||"orbit",this._autosave=void 0!==b.autosave?b.autosave:!0;var c=void 0!==b.autoload?b.autoload:!0;this._isDirty=!1,this.on("didTransform",function(){this._saveData()},this),c&&this.load()},load:function(){var a=window.localStorage.getItem(this.namespace);a&&this.reset(JSON.parse(a))},enableAutosave:function(){this._autosave||(this._autosave=!0,this._isDirty&&this._saveData())},disableAutosave:function(){this._autosave&&(this._autosave=!1)},_saveData:function(a){return this._autosave||a?(window.localStorage.setItem(this.namespace,JSON.stringify(this.retrieve())),void(this._isDirty=!1)):void(this._isDirty=!0)}});c["default"]=g});